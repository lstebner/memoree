(function(){var t;t={init:function(){return this.memoree=new t.Main("#memoree"),this.toolbar=new t.Toolbar("#toolbar")},request:function(t){if(!(_.indexOf(["reset"],t)>-1))return console.log("requested action is not available");switch(t){case"reset":return this.memoree.reset()}}},t.Main=function(){function t(t,e){this.opts=null!=e?e:{},this.opts=_.extend({shuffle:!0,mode:"echo"},this.opts),this.container=$(t),this.setup(),this.render()}return t.prototype.setup=function(){return this.uncovered_cards=0,this.matched_cards=0,this.card_zone=this.container.find(".card_zone"),this.load_deck(),this.setup_events()},t.prototype.setup_events=function(){return this.container.on("click",function(t){return function(e){var r,n,o,s;return o=!0,s=!0,n=$(e.target),r=$(e.currentTarget),n.is(".card")&&t.click_card(n,e),o&&e.preventDefault(),s?void 0:e.stopPropagation()}}(this))},t.prototype.load_deck=function(){return this.words=dictionary_words},t.prototype.render=function(){var t,e,r,n,o,s,i,c,a,u,d,h;for(this.cards=[],a=this.words,n=r=0,s=a.length;s>r;n=++r)d=a[n],h=d[0],c="echo"===this.opts.mode?d[0]:d[1],t="<div class='card' data-id='"+n+"'><span>"+h+"</span></div>",this.cards.push(t),c="<div class='card' data-id='"+n+"m'><span>"+c+"</span></div>",this.cards.push(c);for(e=this.opts.shuffle?_.shuffle(this.cards):this.cards,u=[],o=0,i=e.length;i>o;o++)t=e[o],u.push(this.card_zone.append(t));return u},t.prototype.click_card=function(t,e){return this.check_cards_to?void 0:(this.uncovered_cards<2&&this.uncover(t),2===this.uncovered_cards?this.check_cards_to=setTimeout(function(t){return function(){return t.check_cards_to=null,t.check_uncovered_cards(),t.matched_cards===t.words.length?t.finished():void 0}}(this),500):void 0)},t.prototype.uncover=function(t){return t.addClass("uncover"),this.uncovered_cards++},t.prototype.check_uncovered_cards=function(){var t,e,r,n,o,s;return t=this.container.find(".card.uncover"),2!==t.length?console.log("not enough uncovered cards"):(n=function(){var n,o,s;for(s=[],n=0,o=t.length;o>n;n++)e=t[n],r=$(e).data("id"),s.push(r);return s}(),o=this.is_match(n[0],n[1]),s=o?(this.matched_cards++,"matched"):(setTimeout(function(t){return function(){return t.container.find(".miss").removeClass("miss")}}(this),800),"miss"),t.addClass(s).removeClass("uncover"),this.uncovered_cards=0,o)},t.prototype.is_match=function(t,e){return e===t+"m"||t===e+"m"},t.prototype.finished=function(){return console.log("all cards matched!"),this.container.addClass("complete")},t.prototype.reset=function(){return this.uncovered_cards=0,this.matched_cards=0,this.card_zone.html(""),this.container.removeClass("complete"),this.render()},t}(),t.Toolbar=function(){function t(t,e){this.opts=null!=e?e:{},this.container=$(t),this.setup()}return t.prototype.setup=function(){return this.setup_events()},t.prototype.setup_events=function(){return this.container.on("click",function(t){return function(t){var e,r,n,o;return n=!0,o=!0,r=$(t.target),e=$(t.currentTarget),r.is(".reset_btn")&&confirm("Are you sure?")&&document.Memoree.request("reset"),n&&t.preventDefault(),o?void 0:t.stopPropagation()}}(this))},t}(),$(function(){return document.Memoree=t,document.Memoree.init()})}).call(this);